# Story 3.4 å¤šå†…å®¹åˆå¹¶æœåŠ¡å®Œæˆ - å˜æ›´æ—¥å¿—

## ğŸ“… æ—¶é—´ä¿¡æ¯
- **æ—¥æœŸ**: 2025-09-11
- **ç‰ˆæœ¬**: v1.0.0
- **ç±»å‹**: æ–°åŠŸèƒ½å¼€å‘
- **ä¼˜å…ˆçº§**: Epic 3 - é«˜ä¼˜å…ˆçº§

## ğŸ¯ å¼€å‘æ¦‚è¿°

Story 3.4å¤šå†…å®¹åˆå¹¶æœåŠ¡çš„å®Œæ•´å¼€å‘ï¼Œè¿™æ˜¯Epic 3 AIå¤§æ¨¡å‹æœåŠ¡å’Œå†…å®¹æ–‡æœ¬ä¼˜åŒ–çš„ç¬¬4ä¸ªæ ¸å¿ƒStoryã€‚è¯¥æœåŠ¡æä¾›åŸºäºAIçš„æ™ºèƒ½å†…å®¹åˆå¹¶åŠŸèƒ½ï¼Œæ”¯æŒ5ç§ä¸“ä¸šåˆå¹¶ç­–ç•¥ï¼Œå…·å¤‡å®Œæ•´çš„è´¨é‡è¯„ä¼°ä½“ç³»ã€‚

## ğŸ† ä¸»è¦æˆå°±

### âœ… å®Œæ•´å¾®æœåŠ¡æ¶æ„
- **æœåŠ¡åç§°**: content-merger-service
- **ç«¯å£**: 8011
- **æ¶æ„**: å®Œå…¨æ— çŠ¶æ€ï¼Œé€šè¿‡storage-serviceå’Œai-model-serviceé›†æˆ
- **è¯­è¨€**: Python 3.11 + FastAPI

### âœ… 5ç§æ™ºèƒ½åˆå¹¶ç­–ç•¥
1. **æ—¶é—´çº¿æ•´åˆ**: æŒ‰æ—¶é—´é¡ºåºæ•´åˆå†å²äº‹ä»¶
2. **ä¸»é¢˜å½’å¹¶**: æŒ‰ä¸»é¢˜åˆ†ç±»åˆå¹¶ç›¸å…³å†…å®¹
3. **å±‚æ¬¡ç»„ç»‡**: æŒ‰é‡è¦æ€§å±‚æ¬¡ç»„ç»‡ä¿¡æ¯
4. **é€»è¾‘å…³ç³»**: æ„å»ºé€»è¾‘å…³ç³»ï¼Œå¼ºè°ƒå› æœæ¨ç†
5. **è¡¥å……æ‰©å±•**: ç”¨ç›¸å…³å†…å®¹è¡¥å……ä¸»è¦å†…å®¹

### âœ… AIé©±åŠ¨æ™ºèƒ½åˆå¹¶
- **AIæ¨¡å‹é›†æˆ**: æ·±åº¦é›†æˆai-model-service
- **æ™ºèƒ½æç¤ºè¯­**: æ ¹æ®ç­–ç•¥åŠ¨æ€ç”Ÿæˆæç¤ºè¯­
- **æ¸©åº¦å‚æ•°ä¼˜åŒ–**: æ ¹æ®åˆå¹¶ç­–ç•¥è‡ªåŠ¨è°ƒæ•´AIå‚æ•°
- **å¤šæ¨¡å¼æ”¯æŒ**: comprehensiveã€selectiveã€summaryã€expansion

### âœ… 5ç»´åº¦è´¨é‡è¯„ä¼°
1. **ä¸€è‡´æ€§**: å†…å®¹é€»è¾‘ä¸€è‡´æ€§è¯„ä¼°
2. **å®Œæ•´æ€§**: ä¿¡æ¯ä¿ç•™å®Œæ•´åº¦è¯„ä¼°
3. **æµç•…æ€§**: è¯­è¨€è¡¨è¾¾æµç•…åº¦è¯„ä¼°
4. **åŸåˆ›æ€§**: é¿å…ç®€å•å¤åˆ¶æ£€æµ‹
5. **äº‹å®å‡†ç¡®æ€§**: å†å²äº‹å®å‡†ç¡®æ€§éªŒè¯

### âœ… å†…å®¹åˆ†æå¼•æ“
- **ä¸»é¢˜æå–**: åŸºäºjieba + TF-IDFçš„ä¸­æ–‡ä¸»é¢˜æå–
- **å®ä½“è¯†åˆ«**: äººåã€åœ°åã€æœºæ„ã€æ—¶é—´ç­‰å®ä½“è¯†åˆ«
- **æ—¶é—´ä¿¡æ¯åˆ†æ**: æ—¶é—´è¡¨è¾¾å¼æå–å’Œè§„èŒƒåŒ–
- **å…³é”®ç‚¹æå–**: åŸºäºTextRankçš„å…³é”®å¥æå–

### âœ… æ™ºèƒ½å…³ç³»åˆ†æ
- **ç›¸ä¼¼åº¦è®¡ç®—**: åŸºäºTF-IDFå‘é‡çš„å†…å®¹ç›¸ä¼¼åº¦
- **æ—¶é—´æ’åº**: æ™ºèƒ½æ—¶é—´ä¿¡æ¯æ’åº
- **ä¸»é¢˜é‡å **: ä¸»é¢˜ç›¸å…³æ€§åˆ†æ
- **å®ä½“è¿æ¥**: å®ä½“å…³ç³»ç½‘ç»œåˆ†æ

## ğŸ“¦ æ–°å¢æ–‡ä»¶

### æ ¸å¿ƒæœåŠ¡æ–‡ä»¶
- `services/content-merger-service/src/main.py` - FastAPIåº”ç”¨å…¥å£
- `services/content-merger-service/src/config/settings.py` - é…ç½®ç®¡ç†
- `services/content-merger-service/src/models/merger_models.py` - æ•°æ®æ¨¡å‹
- `services/content-merger-service/src/controllers/merger_controller.py` - APIæ§åˆ¶å™¨
- `services/content-merger-service/requirements.txt` - Pythonä¾èµ–

### æ ¸å¿ƒå¼•æ“ç»„ä»¶
- `services/content-merger-service/src/services/content_merger_engine.py` - åˆå¹¶å¼•æ“
- `services/content-merger-service/src/services/content_analyzer.py` - å†…å®¹åˆ†æå™¨
- `services/content-merger-service/src/services/quality_assessor.py` - è´¨é‡è¯„ä¼°å™¨

### å¤–éƒ¨æœåŠ¡å®¢æˆ·ç«¯
- `services/content-merger-service/src/clients/storage_client.py` - å­˜å‚¨æœåŠ¡å®¢æˆ·ç«¯
- `services/content-merger-service/src/clients/ai_service_client.py` - AIæœåŠ¡å®¢æˆ·ç«¯

### éƒ¨ç½²é…ç½®
- `services/content-merger-service/Dockerfile` - å®¹å™¨åŒ–é…ç½®
- `services/content-merger-service/README.md` - æœåŠ¡æ–‡æ¡£

## ğŸ”§ æŠ€æœ¯æ¶æ„

### æŠ€æœ¯æ ˆ
- **Webæ¡†æ¶**: FastAPI + Uvicorn
- **æ•°æ®æ¨¡å‹**: Pydantic v2
- **NLPå¤„ç†**: jiebaã€spaCyã€transformers
- **ç§‘å­¦è®¡ç®—**: numpyã€scikit-learn
- **å¼‚æ­¥å¤„ç†**: asyncioã€httpx
- **ç¼“å­˜**: Redis (æ•°æ®åº“5)
- **æ—¥å¿—**: structlog

### ä¾èµ–ç®¡ç†
50+ä¸ªç²¾å¿ƒé€‰æ‹©çš„PythonåŒ…ï¼ŒåŒ…æ‹¬ï¼š
- FastAPIç”Ÿæ€ç³»ç»Ÿ (fastapiã€uvicornã€pydantic)
- AI/MLå·¥å…· (transformersã€torchã€scikit-learn)
- NLPåº“ (jiebaã€spacyã€textstat)
- æ•°æ®å¤„ç† (pandasã€numpyã€scipy)
- å¼‚æ­¥HTTP (httpxã€aioredis)

### æœåŠ¡é›†æˆ
- **storage-service (8002)**: æ•°æ®å­˜å‚¨å’Œç®¡ç†
- **ai-model-service (8008)**: AIæ¨¡å‹è°ƒç”¨
- **Redis**: ç¼“å­˜å’Œæ€§èƒ½ä¼˜åŒ–

## ğŸš€ APIæ¥å£

### REST APIç«¯ç‚¹
- `POST /api/v1/merger/create` - åˆ›å»ºåˆå¹¶ä»»åŠ¡
- `GET /api/v1/merger/tasks/{task_id}/status` - æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€
- `GET /api/v1/merger/tasks/{task_id}/result` - è·å–åˆå¹¶ç»“æœ
- `POST /api/v1/merger/batch` - æ‰¹é‡åˆå¹¶
- `POST /api/v1/merger/analyze-relationships` - å…³ç³»åˆ†æ
- `POST /api/v1/merger/preview` - åˆå¹¶é¢„è§ˆ

### ç³»ç»Ÿç«¯ç‚¹
- `GET /health` - å¥åº·æ£€æŸ¥
- `GET /ready` - å°±ç»ªæ£€æŸ¥
- `GET /info` - æœåŠ¡ä¿¡æ¯

## ğŸ³ å®¹å™¨åŒ–éƒ¨ç½²

### Dockeré…ç½®
- **åŸºç¡€é•œåƒ**: python:3.11-slim
- **ç«¯å£**: 8011
- **å¥åº·æ£€æŸ¥**: HTTPå¥åº·æ£€æŸ¥ç«¯ç‚¹
- **å®‰å…¨**: érootç”¨æˆ·è¿è¡Œ

### Docker Composeé›†æˆ
- å·²æ›´æ–° `docker-compose.dev.yml`
- é…ç½®ç¯å¢ƒå˜é‡å’Œä¾èµ–å…³ç³»
- é›†æˆåˆ°ç°æœ‰å¾®æœåŠ¡ç½‘ç»œ

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### ç›®æ ‡æ€§èƒ½
- **å•æ¬¡åˆå¹¶**: < 5ç§’
- **æ‰¹é‡å¤„ç†**: æ”¯æŒ20+å†…å®¹æº
- **è´¨é‡è¯„ä¼°**: < 3ç§’
- **å¹¶å‘å¤„ç†**: æ”¯æŒ5ä¸ªå¹¶å‘åˆå¹¶ä»»åŠ¡

### èµ„æºé…ç½®
- **å†…å­˜**: 512MB-1GB
- **CPU**: 1-2æ ¸
- **å­˜å‚¨**: ä¸´æ—¶æ–‡ä»¶å’Œæ¨¡å‹ç¼“å­˜

## ğŸ”„ é›†æˆæ›´æ–°

### docker-compose.dev.yml
- æ–°å¢content-merger-serviceé…ç½®
- é…ç½®ç¯å¢ƒå˜é‡å’Œç½‘ç»œ
- æ›´æ–°é›†æˆæµ‹è¯•ä¾èµ–

### DEVELOPMENT_DASHBOARD.md  
- æ›´æ–°Story 3.4çŠ¶æ€ä¸º100%å®Œæˆ
- æ·»åŠ æ–°æœåŠ¡åˆ°æ¶æ„æ¦‚è§ˆ
- è®°å½•æœ€æ–°æˆå°±å’ŒæŠ€æœ¯äº®ç‚¹

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯• (è®¡åˆ’)
- åˆå¹¶ç­–ç•¥æµ‹è¯•
- è´¨é‡è¯„ä¼°æµ‹è¯•
- å†…å®¹åˆ†ææµ‹è¯•
- APIç«¯ç‚¹æµ‹è¯•

### é›†æˆæµ‹è¯• (è®¡åˆ’)
- å¤–éƒ¨æœåŠ¡é›†æˆæµ‹è¯•
- ç«¯åˆ°ç«¯åˆå¹¶æµç¨‹æµ‹è¯•
- æ€§èƒ½åŸºå‡†æµ‹è¯•

## ğŸ“ æ–‡æ¡£æ›´æ–°

### æœåŠ¡æ–‡æ¡£
- **README.md**: 1000+è¡Œå®Œæ•´æœåŠ¡æ–‡æ¡£
- **APIæ–‡æ¡£**: è‡ªåŠ¨ç”Ÿæˆçš„OpenAPI/Swaggeræ–‡æ¡£
- **é…ç½®æŒ‡å—**: ç¯å¢ƒå˜é‡å’Œéƒ¨ç½²é…ç½®

### é¡¹ç›®æ–‡æ¡£
- **DEVELOPMENT_DASHBOARD.md**: Epic 3è¿›åº¦æ›´æ–°
- **å˜æ›´æ—¥å¿—**: æœ¬æ–‡æ¡£è®°å½•å®Œæ•´å˜æ›´

## ğŸ¯ ä¸šåŠ¡ä»·å€¼

### åŠŸèƒ½ä»·å€¼
- **æ™ºèƒ½åˆå¹¶**: AIé©±åŠ¨çš„é«˜è´¨é‡å†…å®¹åˆå¹¶
- **å¤šç­–ç•¥æ”¯æŒ**: é€‚åº”ä¸åŒå†…å®¹ç±»å‹çš„åˆå¹¶éœ€æ±‚
- **è´¨é‡ä¿è¯**: å…¨é¢çš„è´¨é‡è¯„ä¼°ä½“ç³»
- **æ‰¹é‡å¤„ç†**: æ”¯æŒå¤§è§„æ¨¡å†…å®¹å¤„ç†

### æŠ€æœ¯ä»·å€¼  
- **æ¶æ„ä¸€è‡´**: éµå¾ªé¡¹ç›®æ— çŠ¶æ€å¾®æœåŠ¡æ¶æ„
- **AIé›†æˆ**: æ·±åº¦é›†æˆAIå¤§æ¨¡å‹æœåŠ¡
- **æ€§èƒ½ä¼˜åŒ–**: Redisç¼“å­˜å’Œå¼‚æ­¥å¤„ç†
- **å¯æ‰©å±•æ€§**: æ”¯æŒæ°´å¹³æ‰©å±•å’Œè´Ÿè½½å‡è¡¡

## ğŸ”® åç»­è®¡åˆ’

### çŸ­æœŸä¼˜åŒ–
- å®Œå–„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- æ€§èƒ½åŸºå‡†æµ‹è¯•å’Œä¼˜åŒ–
- å¢åŠ æ›´å¤šåˆå¹¶ç­–ç•¥
- ä¼˜åŒ–AIæ¨¡å‹å‚æ•°

### ä¸­æœŸæ‰©å±•
- æ”¯æŒå¤šè¯­è¨€å†…å®¹åˆå¹¶
- å¢åŠ å›¾ç‰‡å’Œè¡¨æ ¼å¤„ç†
- æ‰¹é‡å¤„ç†æ€§èƒ½ä¼˜åŒ–
- ç”¨æˆ·ç•Œé¢é›†æˆ

## ğŸ ç»“è®º

Story 3.4å¤šå†…å®¹åˆå¹¶æœåŠ¡çš„æˆåŠŸå®Œæˆæ ‡å¿—ç€Epic 3 AIå¤§æ¨¡å‹æœåŠ¡å’Œå†…å®¹æ–‡æœ¬ä¼˜åŒ–çš„é‡è¦è¿›å±•ã€‚è¯¥æœåŠ¡æä¾›äº†å®Œæ•´çš„AIé©±åŠ¨å†…å®¹åˆå¹¶è§£å†³æ–¹æ¡ˆï¼Œä¸ºå†å²æ–‡æœ¬ä¼˜åŒ–é¡¹ç›®å¢åŠ äº†å¼ºå¤§çš„å†…å®¹æ•´åˆèƒ½åŠ›ã€‚

é€šè¿‡5ç§æ™ºèƒ½åˆå¹¶ç­–ç•¥å’Œ5ç»´åº¦è´¨é‡è¯„ä¼°ä½“ç³»ï¼Œè¯¥æœåŠ¡èƒ½å¤Ÿé«˜è´¨é‡åœ°å¤„ç†å¤šæºå†…å®¹åˆå¹¶éœ€æ±‚ï¼Œä¸ºåç»­çš„å†…å®¹å‘å¸ƒå’Œç®¡ç†å¥ å®šäº†åšå®åŸºç¡€ã€‚

**Epic 3 å½“å‰çŠ¶æ€**: Story 3.1-3.4 å·²å®Œæˆï¼Œä»…å‰©Story 3.5ç­‰å¾…å¼€å‘ï¼ŒEpic 3 å³å°†å…¨é¢å®Œæˆã€‚