{
  "test_type": "cross_service_communication_integration",
  "execution_time": "2025-09-09T10:03:31.843534",
  "results": [
    {
      "test_name": "所有服务健康状态",
      "status": "PASSED",
      "timestamp": "2025-09-09T10:03:31.832593",
      "duration": 0.014815125000000012,
      "details": {
        "total_services": 3,
        "available_services": 2,
        "availability_rate": 66.67,
        "service_status": {
          "file-processor": {
            "available": true,
            "status_code": 200,
            "response_time_ms": 0,
            "health_data": {
              "status": "healthy",
              "timestamp": "2025-09-09T02:03:31.823894",
              "service": {
                "name": "data-source-service",
                "version": "1.0.0",
                "environment": "testing"
              },
              "components": {
                "processors": {
                  "status": "ready",
                  "available_processors": [
                    "pdf",
                    "word",
                    "image",
                    "html"
                  ]
                }
              },
              "issues": []
            }
          },
          "storage-service": {
            "available": true,
            "status_code": 200,
            "response_time_ms": 0,
            "health_data": {}
          },
          "intelligent-classification": {
            "available": false,
            "error": "[Errno 54] Connection reset by peer",
            "status_code": 0
          }
        }
      },
      "error": null
    },
    {
      "test_name": "storage→file-processor通信",
      "status": "PASSED",
      "timestamp": "2025-09-09T10:03:31.835454",
      "duration": 0.00283504200000001,
      "details": {
        "file_processor_available": true,
        "storage_service_available": true,
        "network_reachable": true,
        "communication_possible": true,
        "file_processor_processors": {
          "status": "ready",
          "available_processors": [
            "pdf",
            "word",
            "image",
            "html"
          ]
        },
        "storage_service_info": {}
      },
      "error": null
    },
    {
      "test_name": "storage→classification通信",
      "status": "KNOWN_ISSUE",
      "timestamp": "2025-09-09T10:03:31.836683",
      "duration": 0.0012135000000000062,
      "details": {
        "classification_service_available": false,
        "storage_service_available": true,
        "classification_error": "[Errno 54] Connection reset by peer",
        "communication_possible": false
      },
      "error": "intelligent-classification服务不响应: [Errno 54] Connection reset by peer"
    },
    {
      "test_name": "服务发现模拟",
      "status": "FAILED",
      "timestamp": "2025-09-09T10:03:31.839436",
      "duration": 0.0027358339999999925,
      "details": {
        "total_services": 3,
        "discoverable_services": 1,
        "discovery_rate": 33.33,
        "discovered_services": {
          "file-processor": {
            "service_name": "file-processor",
            "base_url": "http://localhost:8001",
            "health_endpoint": "http://localhost:8001/health",
            "info_endpoint": "http://localhost:8001/info",
            "discoverable": true,
            "service_info": {
              "service": {
                "name": "data-source-service",
                "version": "1.0.0",
                "environment": "testing",
                "host": "0.0.0.0",
                "port": 8000,
                "type": "file-processor",
                "description": "纯文件处理服务，专注文件处理算法"
              },
              "capabilities": {
                "document_formats": [
                  {
                    "extension": "pdf",
                    "description": "PDF文档",
                    "features": [
                      "文本提取",
                      "元数据提取"
                    ]
                  },
                  {
                    "extension": "docx",
                    "description": "Word文档",
                    "features": [
                      "文本提取"
                    ]
                  },
                  {
                    "extension": "html",
                    "description": "HTML文档",
                    "features": [
                      "文本提取",
                      "结构化解析"
                    ]
                  }
                ],
                "image_formats": [
                  {
                    "extension": "jpg",
                    "description": "JPEG图片",
                    "features": [
                      "OCR文字识别"
                    ]
                  },
                  {
                    "extension": "png",
                    "description": "PNG图片",
                    "features": [
                      "OCR文字识别"
                    ]
                  },
                  {
                    "extension": "gif",
                    "description": "GIF图片",
                    "features": [
                      "OCR文字识别"
                    ]
                  }
                ],
                "processing_features": {
                  "async_processing": true,
                  "batch_processing": true,
                  "status_tracking": true,
                  "error_handling": true,
                  "file_validation": true
                }
              },
              "architecture": {
                "database_dependencies": false,
                "stateless_design": true,
                "storage_service_integration": true,
                "microservice_type": "pure_processing"
              },
              "api": {
                "prefix": "/api/v1",
                "docs": "/docs",
                "openapi": "/openapi.json",
                "endpoints": {
                  "pdf_processing": "/api/v1/process/pdf",
                  "image_ocr": "/api/v1/process/image-ocr",
                  "document_processing": "/api/v1/process/document",
                  "batch_processing": "/api/v1/process/batch",
                  "status_check": "/api/v1/process/status/{task_id}"
                }
              }
            },
            "api_endpoints": {
              "pdf_processing": "/api/v1/process/pdf",
              "image_ocr": "/api/v1/process/image-ocr",
              "document_processing": "/api/v1/process/document",
              "batch_processing": "/api/v1/process/batch",
              "status_check": "/api/v1/process/status/{task_id}"
            }
          },
          "storage-service": {
            "service_name": "storage-service",
            "base_url": "http://localhost:8002",
            "health_endpoint": "http://localhost:8002/health",
            "info_endpoint": "http://localhost:8002/info",
            "discoverable": false,
            "discovery_error": "HTTP 404"
          },
          "intelligent-classification": {
            "service_name": "intelligent-classification",
            "base_url": "http://localhost:8007",
            "health_endpoint": "http://localhost:8007/health",
            "info_endpoint": "http://localhost:8007/info",
            "discoverable": false,
            "discovery_error": "[Errno 54] Connection reset by peer"
          }
        }
      },
      "error": "可发现服务不足: 1/3"
    },
    {
      "test_name": "并发服务访问",
      "status": "FAILED",
      "timestamp": "2025-09-09T10:03:31.843214",
      "duration": 0.0037505830000000018,
      "details": {
        "total_concurrent_requests": 9,
        "successful_requests": 6,
        "overall_success_rate": 66.67,
        "total_time_seconds": 0.004,
        "requests_per_second": 2399.63,
        "service_statistics": {
          "file-processor": {
            "total": 3,
            "successful": 3,
            "success_rate": 100.0
          },
          "storage-service": {
            "total": 3,
            "successful": 3,
            "success_rate": 100.0
          },
          "intelligent-classification": {
            "total": 3,
            "successful": 0,
            "success_rate": 0.0
          }
        },
        "concurrent_stability": false
      },
      "error": "并发稳定性不足: 6/9成功"
    }
  ]
}