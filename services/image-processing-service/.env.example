# 图像处理服务环境配置示例

# 服务基础配置
SERVICE_NAME=image-processing-service
SERVICE_VERSION=1.0.0
PORT=8005
DEBUG=true
LOG_LEVEL=INFO
ENVIRONMENT=development

# CORS配置
ALLOWED_ORIGINS=["http://localhost:3000", "http://localhost:8080", "http://localhost:5173"]

# 文件处理配置
MAX_FILE_SIZE=52428800  # 50MB
SUPPORTED_IMAGE_FORMATS=["jpg", "jpeg", "png", "tiff", "tif", "bmp", "webp"]
TEMP_DIR=/tmp/image-processing
UPLOAD_DIR=/tmp/uploads
MAX_CONCURRENT_TASKS=10
TASK_TIMEOUT=300  # 5分钟

# Storage Service配置
STORAGE_SERVICE_URL=http://localhost:8002
STORAGE_SERVICE_TIMEOUT=30
STORAGE_SERVICE_RETRIES=3

# 图像处理引擎配置
DEFAULT_PROCESSING_ENGINE=opencv
OPENCV_THREAD_COUNT=4
TORCH_DEVICE=cpu  # 或 cuda:0 如果有GPU

# 质量评估阈值
QUALITY_BRIGHTNESS_MIN=50
QUALITY_BRIGHTNESS_MAX=200
QUALITY_CONTRAST_MIN=30
QUALITY_SHARPNESS_MIN=100
QUALITY_NOISE_MAX=0.1
QUALITY_BLUR_MAX=50
QUALITY_SKEW_MAX=5.0

# 图像增强参数
ENHANCE_BRIGHTNESS_FACTOR=1.1
ENHANCE_CONTRAST_FACTOR=1.2
ENHANCE_SHARPNESS_FACTOR=1.1
DENOISE_STRENGTH=10
DESKEW_ANGLE_THRESHOLD=1.0

# 批量处理配置
BATCH_SIZE=10
BATCH_CONCURRENT_WORKERS=3
BATCH_PROGRESS_UPDATE_INTERVAL=5

# Redis缓存配置已移除 - 通过storage-service统一管理
# 所有缓存操作通过storage-service HTTP API进行

# 监控和指标
ENABLE_METRICS=true
METRICS_PORT=9090
PROMETHEUS_NAMESPACE=image_processing