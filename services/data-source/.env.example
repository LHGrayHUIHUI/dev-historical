# 数据源服务环境变量示例
# 复制此文件为 .env 并修改相应的配置值

# ===================
# 服务配置
# ===================
SERVICE_SERVICE_NAME=data-source-service
SERVICE_SERVICE_VERSION=1.0.0
SERVICE_ENVIRONMENT=development
SERVICE_HOST=0.0.0.0
SERVICE_PORT=8000
SERVICE_WORKERS=1
SERVICE_API_PREFIX=/api/v1
SERVICE_DOCS_URL=/docs
SERVICE_OPENAPI_URL=/openapi.json

# 安全配置
SERVICE_SECRET_KEY=your-secret-key-change-in-production
SERVICE_JWT_ALGORITHM=HS256
SERVICE_JWT_EXPIRE_MINUTES=30

# CORS配置
SERVICE_CORS_ORIGINS=http://localhost:3000,http://localhost:8080
SERVICE_CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS

# 限流配置
SERVICE_RATE_LIMIT_REQUESTS=100
SERVICE_RATE_LIMIT_WINDOW=60

# ===================
# 数据库配置
# ===================
DB_MONGODB_URL=mongodb://localhost:27017
DB_MONGODB_DB_NAME=historical_text_data
DB_MONGODB_MAX_POOL_SIZE=50
DB_MONGODB_MIN_POOL_SIZE=10

DB_REDIS_URL=redis://localhost:6379
DB_REDIS_MAX_CONNECTIONS=20

# ===================
# 爬虫配置
# ===================
CRAWLER_MAX_CONCURRENT_CRAWLERS=10
CRAWLER_CRAWLER_TIMEOUT=300
CRAWLER_REQUEST_DELAY_MIN=1.0
CRAWLER_REQUEST_DELAY_MAX=5.0
CRAWLER_RETRY_ATTEMPTS=3
CRAWLER_RETRY_DELAY=2.0
CRAWLER_ENABLE_PROXY=false

# User-Agent池（JSON格式）
CRAWLER_USER_AGENTS='["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"]'

# 验证码识别
CRAWLER_CAPTCHA_SERVICE_URL=
CRAWLER_CAPTCHA_API_KEY=

# ===================
# 代理配置
# ===================
# 代理供应商配置（JSON格式）
PROXY_PROXY_PROVIDERS='{
  "free_proxy": {
    "enabled": true,
    "urls": [
      "https://www.proxy-list.download/api/v1/get?type=http",
      "https://api.proxyscrape.com/v2/?request=get&protocol=http"
    ],
    "quality": "low"
  },
  "premium_proxy": {
    "enabled": false,
    "api_url": "",
    "api_key": "",
    "quality": "high"
  }
}'

PROXY_PROXY_POOL_SIZE=100
PROXY_PROXY_CHECK_INTERVAL=600
PROXY_PROXY_FAILURE_THRESHOLD=3

# ===================
# 日志配置
# ===================
LOG_LOG_LEVEL=INFO
LOG_LOG_FORMAT="{time:YYYY-MM-DD HH:mm:ss} | {level} | {name}:{function}:{line} | {message}"
LOG_LOG_FILE=
LOG_LOG_ROTATION="1 day"
LOG_LOG_RETENTION="30 days"
LOG_JSON_LOGS=false

# ===================
# 监控配置
# ===================
MONITOR_ENABLE_METRICS=true
MONITOR_METRICS_PORT=8001
MONITOR_HEALTH_CHECK_INTERVAL=30

# Consul服务注册
MONITOR_CONSUL_HOST=localhost
MONITOR_CONSUL_PORT=8500
MONITOR_ENABLE_SERVICE_REGISTRY=true

# ===================
# 开发配置
# ===================
# 开发模式下的特殊配置
DEV_AUTO_RELOAD=true
DEV_DEBUG_MODE=true
DEV_MOCK_EXTERNAL_SERVICES=false

# 测试配置
TEST_DATABASE_URL=mongodb://localhost:27017/historical_text_test
TEST_REDIS_URL=redis://localhost:6379/1

# ===================
# 生产环境配置示例
# ===================
# 生产环境下请使用以下配置模板：

# SERVICE_ENVIRONMENT=production
# SERVICE_SECRET_KEY=your-very-secure-secret-key-min-32-chars
# SERVICE_WORKERS=4
# LOG_LOG_LEVEL=WARNING
# LOG_JSON_LOGS=true
# CRAWLER_MAX_CONCURRENT_CRAWLERS=20
# CRAWLER_ENABLE_PROXY=true
# DB_MONGODB_URL=mongodb://user:password@mongo-cluster:27017/production_db
# DB_REDIS_URL=redis://user:password@redis-cluster:6379
# MONITOR_CONSUL_HOST=consul.production.local